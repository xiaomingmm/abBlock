/*!
 *
 * abBlock-v1.4 (导航定位&吸顶)滚动插件
 * 官网: http://ab.geshai.com/other-plus/abBlock
 *  
 * 有疑难问题可选择QQ群① 158544200 或QQ群② 790370978 进行反馈
 * 
 * Copyright Carlo,Cloud
 *
 * 请尊重原创，保留头部版权
 * 在保留版权的前提下，可应用于个人或商业用途
 *
 */
;!function(a){a.fn.abBlock=function(b){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;a.fn.abBlock.__defs={_version:1.4,scroll:"html,body",tit:!1,titContainer:"",block:!1,stickType:"left",positionType:1,offsetY:0,offsetX:0,early:0,appoint:!1,onClass:!1,offClass:!1,titOnClass:"on",speed:250,callback:null,_style:"#ab0bd0437x",_topExp:"ab_abac96_fixed",_onClass:"ab_abac96_def"},b=a.extend({},a.fn.abBlock.__defs,b),b.callbackFunc=function(a,c){"function"==typeof b.callback&&b.callback(a,c)},b.isIE6=function(){return a.browser.msie&&parseInt(a.browser.version)<7},b.scrollTop=function(){return parseFloat(a(window).scrollTop())},b.titIsOff=function(){return!1===this.tit},b.px=function(a){return a.toString()+"px"},b.winDocWh=function(){return{winW:a(window).width(),winH:a(window).height()}},b.appointTop=function(){if(!1===this.appoint)return 0;if(/^[1-9]([0-9]+)?$/.test(this.appoint))return parseFloat(this.appoint);var b=a(this.appoint,d);return this.hasLen(b)?b.offset().top:0},b.hasLen=function(a){return 0!=a.length},b.blockSet=function(a){var b=g.eq(a);return{index:a,top:b.offset().top-o,left:b.offset().left,oWidth:b.outerWidth(!0),oHeight:b.outerHeight(!0)}},b.animate=function(c){var d=this.blockSet(c);a(this.scroll).stop(!0,!0).animate({scrollTop:this.px(d.top)},this.speed,function(){b.setIsClick(!1)})},b.titContainerProcess=function(a){a?(f.removeClass(i),f.addClass(h),f.addClass(this._onClass)):(f.addClass(i),f.removeClass(h),f.removeClass(this._onClass))},b.setClass=function(){!this.titIsOff()&&this.hasLen(e)&&(-1==q?e.removeClass(j):e.eq(q).removeClass(j),e.eq(p).addClass(j))},b.scrollExp=function(){var c=a(window).scrollTop(),d=c+1+o;1>=g.length||g.eq(1).offset().top>d?p=0:g.each(function(b,c){var e=b+1;if(e<g.length){if(a(c).offset().top<=d&&g.eq(e).offset().top>d)return p=b,!0}else if(a(c).offset().top<=d||d+a(window).height()+1>=a(document).height())return p=b,!0}),p!=q&&b.setClass(),c>=t?b.titContainerProcess(!0):b.titContainerProcess(!1),q=p,s=d,b.callbackFunc(p,s)},b.scrollEvent=function(){a(window).scroll(function(){b.scrollExp()})},b.wheelExp=function(){return b.isClicked()?(b.setIsClick(!1),a(b.scroll).stop(!0,!0),void 0):!0},b.wheelEvent=function(){var a=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel",b=d[0];b.attachEvent?b.attachEvent("on"+a,this.wheelExp):b.addEventListener&&b.addEventListener(a,this.wheelExp,!1)},b.createStyle=function(){var c,d;return 0!=a(b._style).length?!1:(c=[],d=[u.name,":",u.value,"px;"].join(""),this.isIE6()?(c.push("html{_text-overflow:ellipsis;/*background-image:url(about:blank);background-attachment:fixed;*/}"),c.push("."+b._onClass+"{position:absolute;bottom:auto;left:"+u.left+"px !important;"+d+"}"),c.push("."+b._topExp+"{left:200px;"+u.name+":expression(eval(document.documentElement.scrollTop + "+u.value+"));")):c.push("."+b._onClass+"{position:fixed;left:"+u.left+"px !important;"+d+"}"),a("body").append('<style type="text/css" id="'+b._style.substring(1)+'">'+c.join("")+"</style>"),this.isIE6()&&f.addClass(b._topExp),!1===b.onClass&&(h=b._onClass),void 0)},b.getOffsetExp=function(){var a=d.offset().left,b=a+d.outerWidth();return{left:Math.max(0,a)+n,right:Math.max(0,b-this.titContainerWidth())-n}},b.titContainerWidth=function(){return parseFloat(f.outerWidth(!0))||0},b.titContainerHeight=function(){return parseFloat(f.outerHeight(!0))||0},b.isStickRight=function(){return"right"===l},b.isClicked=function(){return r},b.setIsClick=function(a){r=a},b.posTypeToExp=function(){var a={name:"top",value:0,left:0},c=this.getOffsetExp();switch(k){case 2:a.value=Math.max(0,this.winDocWh().winH-this.titContainerHeight())/2,a.value+=m;break;case 3:b.isIE6()?a.value=Math.max(0,this.winDocWh().winH-this.titContainerHeight())-m:(a.name="bottom",a.value+=m);break;default:a.value+=m}return a.left=this.isStickRight()?c.right:c.left,a},b.init=function(){!this.titIsOff()&&this.hasLen(e)&&e.click(function(){b.setIsClick(!0),b.animate(e.index(this))}),this.createStyle(),this.wheelEvent(),this.scrollEvent(),this.scrollExp()},d=a(this),e=a(b.tit,d),f=a(b.titContainer,d),g=a(b.block,d),h=b.onClass,i=b.offClass,j=b.titOnClass,k=b.positionType,l=b.stickType,m=parseFloat(b.offsetY),n=parseFloat(b.offsetX),o=parseFloat(b.early),p=0,q=-1,r=!1,s=b.scrollTop(),t=b.appointTop(),u=b.posTypeToExp(),b.init()}}(jQuery);